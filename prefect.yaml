# Welcome to your prefect.yaml file! You can use this file for storing and managing
# configuration for deploying your flows. We recommend committing this file to source
# control along with your flow code.

# Generic metadata about this project
name: Crypto-Intelligence-Pipeline
prefect-version: 3.4.15

# the deployments section allows you to provide configuration for deploying flows
deployments:
  # This deployment will run the continuous streaming services.
  - name: continuous-services
    version: null
    tags: ["continuous", "production"]
    description: "Deploys the continuous producer, storer, and processor flows."
    entrypoint: flows/main_orchestrator.py:master_orchestrator
    work_pool:
      name: default-agent-pool
      work_queue_name: null
    schedule:
      interval: 300 # Run every 300 seconds (5 minutes)

  # This deployment will handle the scheduled batch jobs, like materialized view refreshes.
  - name: materialized-views-refresh
    version: null
    tags: ["batch", "analytics"]
    description: "Refreshes materialized views on a schedule."
    entrypoint: flows/materialized_views_flow.py:refresh_materialized_views_flow
    work_pool:
      name: default-agent-pool
      work_queue_name: null
    schedule:
      interval: 900 # Run every 900 seconds (15 minutes)

  # This deployment will handle the anomaly detection job on a separate schedule.
  - name: anomaly-detection
    version: null
    tags: ["batch", "alerts"]
    description: "Runs the anomaly detection job on a schedule."
    entrypoint: flows/anomaly_flow.py:anomaly_detection_flow
    work_pool:
      name: default-agent-pool
      work_queue_name: null
    schedule:
      interval: 900 # Run every 900 seconds (15 minutes)